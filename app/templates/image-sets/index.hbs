<div class='lg-page-header'>Image Sets for {{currentOrganization.name}}</div>

{{lg-lion-search action='displayResults' searchType='filter' searchModel='imageSet' organizations=organizations store=store selectedOrganization=selectedOrganization}}

<hr>

<div class='image-set-control-panel row'>
  <div class='col-sm-2'>
    <h4>
      {{#if activeImageSet}}
        Image Set ID {{activeImageSet.id}}
      {{else}}
        Image Set Controls
      {{/if}}
    </h4>
  </div>
  <div class='col-sm-10'>
    <button type="button"
            {{action 'requestCv' activeImageSet}}
            {{bind-attr class=":btn :btn-primary canRequestCv::disabled :request-cv"}}>
      {{#if cvRequestPending}}
        Request Pending
      {{else}}
        Run CV
      {{/if}}
    </button>
    <button type="button"
            {{action 'viewCv'}}
            {{bind-attr class=":btn :btn-primary canViewCv::disabled :view-cv"}}>View CV</button>
    <button type="button"
            {{action 'viewImageSet' activeImageSet}}
            {{bind-attr class=":btn :btn-primary canView::disabled :view-image-set"}}>View/Edit</button>
    <button type="button"
            {{action 'deleteImageSet'}}
            {{bind-attr class=":btn :btn-danger canDelete::disabled :delete"}}>Delete</button>
  </div>
</div>

<div class='image-set-list col-sm-10'>
  <div class='heading'>
    <div class='row'>
      <div class='col-sm-1'>ID</div>
      <div class='col-sm-2'>Name</div>
      <div class='col-sm-2'>Age</div>
      <div class='col-sm-2'>Organization</div>
      <div class='col-sm-4'>Status</div>
      <div class='col-sm-1'></div>
    </div>
  </div>

  {{#if model}}
    {{#each model as |imageSet|}}
      {{#lg-selectable model=imageSet activeModel=activeImageSet action='selectImageSet'}}
        <div class='image-set-item'>
          <div class='col-sm-1 image-set-id'>{{imageSet.id}}</div>
          <div class='col-sm-2'>
            {{#if imageSet.lion}}
              {{imageSet.lion.name}}
            {{/if}}
          </div>
          <div class='col-sm-2'>{{imageSet.age}}</div>
          <div class='col-sm-2'>{{imageSet.organization.name}}</div>
          <div class='col-sm-4'>{{imageSet.status}}</div>
          <div class='col-sm-1'>
            <button type="button"
                    {{action 'viewImageSet' model}}
                    {{bind-attr class=":btn :btn-primary :btn-xs :view-image-set"}}>View/Edit</button>
          </div>
        </div>
      {{/lg-selectable}}
    {{/each}}
  {{/if}}
</div>

<div class='row'>
  <div class='col-sm-2'>
    {{#if activeImageSet.mainImage.url}}
      <div class='image-thumbnail'>
        <img {{bind-attr src=activeImageSet.mainImage.url}}>
      </div>
    {{/if}}
  </div>
</div>

